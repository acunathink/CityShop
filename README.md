# Тестовое задание Python

## Описание
тестовое API для магазинов.
выполнил Карпов Тимофей

### Эндпонты запросов

- GET /city/ — получение списка всех городов из базы данных;
- GET /city/{city_id}/street/ — получение списка всех улиц указанного города
(city_id — идентификатор города);
- POST /shop/ — создание нового магазина. Запрос должен содержать JSON объект с
данными магазина:
```
- name: "Название магазина"
- city: "ID города (должен уже быть в базе)"
- street: "ID улицы (должна уже быть в базе)"
- house: "номер дома"
- open_time: "Время открытия магазина (в формате "часы:минуты")"
- open_time: "Время закрытия магазина (в формате "часы:минуты")"
```

- GET /shop/?street=&city=&open=0/1 - получение списка магазинов.

1. Метод принимает параметры для фильтрации. Все параметры необязательные. Если
параметры не указаны, возвращаются все магазины. При наличии хотя бы одного
параметра выполняется фильтрация по нему.
3. Параметр open: 0 - возвращает закрытые сейчас магазины, 1 - возвращает открытые.


### Запуск проекта c помощбю Docker

- Установите [Docker](https://docs.docker.com/engine/install/)
- в выбранной для проекта директории разместите файл `docker-compose.yml`
- Там же создайте файл `.env` на основе `.env.examlpe`:
- В директории проекта выполните:
```
docker compose up
```
- при отсутствии ошибок можно остановить работу через ^C и запустить в фоновом режиме,
  используя флаг -d:
```
docker compose up -d
```

- после чего можно создать суперюзера для доступа к адимин-зоне сайта, выполнив
```
docker compose exec -it backend python manage.py createsuperuser
```
вход в админ-зону по эндпоинту `/admin`


### Запуск проекта непосредственно из репозитория

- Клонируйте репозиторий и перейдите в него в командной строке:
```
git clone git@github.com:acunathink/CityShop.git && cd CityShop
```

- Создайте файл `.env` на основе `.env.examlpe`:
  Установите пароль для доступа к базе данных (`POSTGRES_PASSWORD`),
  `DJANGO_SECRET_KEY` измените по своему усмотрению.

  Добавьте в настройки доменное имя или ip-адрес связанные с вашим сервером,
  для этого замените значение `DJANGO_HOST` (опционально),
  или удалите это поле, тогда проект будет доступен только локально

- далее необходимо установить зависимости из файла `requirements.txt` - рекомендую использовать виртуальное окружение

- после этого нужно создать и применить миграции:
```
python manage.py makemigrations && python manage.py migrate
```

- теперь можно создать пользователя для доступа в админзону:
```
python manage.py createsuperuser
```

- запуск проекта:
```
python manage.py runserver
```
админ зона будет доступна по адресу http://127.0.0.1:8000/admin/
